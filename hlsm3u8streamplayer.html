<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HLS Live Streaming Player</title>
    <meta name="description" content="Watch live streaming channels seamlessly using our HLS player. Easily add and manage your favorite streams.">
    <meta name="keywords" content="HLS, live streaming, m3u8, video player, online TV">
    <meta name="author" content="Your Name">
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        body {
            display: flex;
            flex-direction: column;
            margin: 0;
            font-family: Arial, sans-serif;
            background: #000;
            color: white;
        }
        .main-container {
            display: flex;
            align-items: flex-start;
            padding: 10px;
        }
        .sidebar {
            width: 250px;
            background: #333;
            padding: 10px;
            height: 100vh;
            overflow-y: auto;
        }
        .sidebar a {
            display: block;
            padding: 10px;
            color: white;
            text-decoration: none;
            cursor: pointer;
        }
        .sidebar a:hover {
            background: #555;
        }
        .player-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
        }
        video {
            width: 80%;
            height: auto;
            max-height: 60vh;
        }
        .content {
            text-align: center;
            max-width: 800px;
            margin-top: 10px;
        }
        .form-container {
            padding: 10px;
            background: #222;
        }
        input, button {
            padding: 5px;
            margin: 5px;
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="sidebar" id="channelList">
            <div class="form-container">
                <input type="text" id="streamUrl" placeholder="Enter Stream URL">
                <button onclick="addStream()">Add Stream</button>
                <input type="file" id="fileInput" accept=".txt" onchange="loadFile(event)">
            </div>
        </div>
        <div class="player-content">
            <video id="video" controls autoplay></video>
            <div class="content">
                <h1>Live Streaming Player</h1>
                <p>Watch your favorite live streams seamlessly. Add streams manually or upload a file containing stream URLs. Enjoy smooth playback with our HLS-powered player.</p>
            </div>
        </div>
    </div>
    
    <script>
        let channels = [];

        function loadChannels() {
            const channelList = document.getElementById("channelList");
            channelList.innerHTML = `<div class="form-container">
                <input type="text" id="streamUrl" placeholder="Enter Stream URL">
                <button onclick="addStream()">Add Stream</button>
                <input type="file" id="fileInput" accept=".txt" onchange="loadFile(event)">
            </div>`;
            channels.forEach(channel => {
                const link = document.createElement("a");
                link.textContent = channel.name;
                link.href = "?stream=" + encodeURIComponent(channel.url);
                link.onclick = (e) => {
                    e.preventDefault();
                    playStream(channel.url);
                    history.pushState(null, "", link.href);
                };
                channelList.appendChild(link);
            });
        }

        function playStream(url) {
            const video = document.getElementById("video");
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(video);
            } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                video.src = url;
            }
            video.play();
        }

        function checkQueryParam() {
            const urlParams = new URLSearchParams(window.location.search);
            const streamUrl = urlParams.get("stream");
            if (streamUrl) playStream(streamUrl);
        }

        function addStream() {
            const streamUrl = document.getElementById("streamUrl").value;
            if (streamUrl) {
                channels.push({ name: `Stream ${channels.length + 1}`, url: streamUrl });
                loadChannels();
            }
        }

        function loadFile(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const lines = e.target.result.split('\n');
                    lines.forEach(line => {
                        if (line.trim()) {
                            channels.push({ name: `Stream ${channels.length + 1}`, url: line.trim() });
                        }
                    });
                    loadChannels();
                };
                reader.readAsText(file);
            }
        }

        loadChannels();
        checkQueryParam();
    </script>
</body>
</html>
